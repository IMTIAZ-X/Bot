<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Website</title>
</head>
<body>
    <div class="form">
        <form action="" onsubmit=" return sender()">
            <input type="text" name="name" id="name" placeholder="Your name" required>
            <input type="email" name="email" id="email" placeholder="Your email" required>
            <textarea name="message" id="message" cols="30" rows="10" placeholder="Enter message" required></textarea>
            <input type="submit" value="Send" id="btn">
        </form>
    </div>
    
    <?php
    // Telegram bot token
    $telegram_bot_id = "6844695637:AAFslZSczg6bF4qC7PpfQOF3OmSZPDOgNwU";
    // Telegram chat ID
    $chat_id = 5457588902;

    // Function to prepare message data
    function prepareMessage($name, $email, $message) {
        return "Name: $name\nEmail: $email\nMessage: $message";
    }

    // Check if the form is submitted
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        // Get form data
        $u_name = $_POST["name"];
        $email = $_POST["email"];
        $message = $_POST["message"];

        // Prepare the message
        $telegram_message = prepareMessage($u_name, $email, $message);

        // Send message to Telegram
        $telegram_url = "https://api.telegram.org/bot$telegram_bot_id/sendMessage";
        $telegram_data = [
            'chat_id' => $chat_id,
            'text' => $telegram_message
        ];

        $options = [
            'http' => [
                'header' => "Content-Type: application/json\r\n",
                'method' => 'POST',
                'content' => json_encode($telegram_data)
            ]
        ];

        $context = stream_context_create($options);
        $result = file_get_contents($telegram_url, false, $context);

        // Clear form fields after submission
        echo '<script>alert("Message sent successfully!");</script>';
    }
    ?>

    <link rel="stylesheet" href="style.css">
    <script src="sender.js"></script>
</body>
</html>
